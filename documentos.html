<!DOCTYPE html>
<html class="no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>DataRegi√≥n - Documentos</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Documentos p√∫blicos y estrat√©gicos de DataRegi√≥n" />
	<meta name="keywords" content="documentos, datos, territorio, DataRegi√≥n" />
	<meta name="author" content="Competitics" />

	<link rel="shortcut icon" href="favicon.ico">
	<link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
	
	<!-- CSS -->
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/flexslider.css">
	<link rel="stylesheet" href="css/style.css">

	<script src="js/modernizr-2.6.2.min.js"></script>
</head>

<body>
<div id="fh5co-page">

<!-- HEADER -->
<header id="fh5co-header" role="banner">
	<div class="container">
		<div class="row">
			<div class="header-inner">
				
				<a href="index.html" class="logo">
    					    <img src="images/logo-dataregion-mod-color-4.png" width="200" height="40">
    					</a>
				
				<nav role="navigation">
					<ul>
						<li><a href="index.html">Inicio</a></li>
						<li><a href="region.html">Regi√≥n</a></li>
						<li><a href="indicadores.html">Indicadores</a></li>
						<li class="active"><a href="documentos.html">Documentos</a></li>
						<li><a href="somos.html">Qu√© somos</a></li>
						<li class="cta"><a href="index.html">Acceder</a></li>
					</ul>
				</nav>

			</div>
		</div>
	</div>
</header>

<!-- HERO -->
<div class="fh5co-page-title" style="background-image: url(images/slide_3_dr.jpg);">
	<div class="overlay"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-12 animate-box">
				<h1><span class="colored">Documentos</span> p√∫blicos</h1>
			</div>
		</div>
	</div>
</div>

<!-- CONTENIDO -->
<div id="best-deal">
	<div class="container">
		<div class="row">

			<!-- CATEGOR√çAS -->
			<div class="col-md-3 animate-box" data-animate-effect="fadeIn">

				<div class="fh5co-property" style="padding:20px;">
					<h3>Categor√≠as de documentos</h3>

					<ul id="categoriasLista" style="list-style:none; padding-left:0;">
						<li><a href="#" class="categoria-item" data-cat="administrativo">Administrativo</a></li>
						<li><a href="#" class="categoria-item" data-cat="capital">Capital humano</a></li>
						<li><a href="#" class="categoria-item" data-cat="competitividad">Competitividad</a></li>
						<li><a href="#" class="categoria-item" data-cat="crecimiento">Crecimiento</a></li>
						<li><a href="#" class="categoria-item" data-cat="fortalecimiento">Fortalecimiento</a></li>
						<li><a href="#" class="categoria-item" data-cat="mercadeo">Mercadeo</a></li>
						<li><a href="#" class="categoria-item" data-cat="registro">Registro</a></li>
					</ul>
				</div>

			</div>

			<!-- BUSCADOR + DOCUMENTOS -->
			<div class="col-md-9 animate-box" data-animate-effect="fadeIn">
				
				<!-- Buscador -->
				<div class="fh5co-property" style="padding:20px;">
					<input 
						type="text" 
						id="buscarDocumento" 
						class="form-control"
						placeholder="Ingrese un t√©rmino de b√∫squeda"
						style="margin-bottom:20px;"
					>
				</div>

				<!-- LISTA DE DOCUMENTOS -->
				<div id="listaDocumentos"></div>
				

			</div>

		</div>
	</div>
</div>

<!-- CTA -->
<div class="fh5co-cta" style="background-image: url(images/slide_2_dr.jpg);">
	<div class="overlay"></div>
	<div class="container">
		<div class="col-md-12 text-center animate-box">
			<h3>DataRegi√≥n: Informaci√≥n estrat√©gica para decisiones estrat√©gicas</h3>
			<p><a href="#" class="btn btn-primary btn-outline with-arrow">Acceder a la Plataforma <i class="icon-arrow-right"></i></a></p>
		</div>
	</div>
</div>

<!-- FOOTER -->
<footer id="fh5co-footer" role="contentinfo">
		<div class="container">

			<!-- Columna 1 -->
			<div class="col-md-3 col-sm-12">
				<h3>DataRegi√≥n</h3>
				<p>
					Es una plataforma territorial de inteligencia estrat√©gica que articula datos socioecon√≥micos,
					institucionales y comunitarios para fortalecer la toma de decisiones en Barrancabermeja y su regi√≥n de influencia.
				</p>
				<p><a href="#" class="btn btn-primary btn-outline with-arrow btn-sm">Crea tu cuenta <i class="icon-arrow-right"></i></a></p>
			</div>

			<!-- Columna 2 -->
			<div class="col-md-3 col-sm-12">
				<h3>Legal</h3>
				<ul class="float">
					<li><a href="privacidad.html">Pol√≠tica de Privacidad</a></li>
					<li><a href="politica-datos.html">Pol√≠tica de Datos</a></li>
					<li><a href="cookies.html">Pol√≠tica de Cookies</a></li>
					<li><a href="terminos.html">T√©rminos y Condiciones</a></li>
					<li><a href="#">PQRS</a></li>
					<li><a href="contact.html">Contacto</a></li>
				</ul>
			</div>

			<!-- Columna 3 -->
			<div class="col-md-3 col-sm-12">
				<h3>Redes Sociales</h3>
				<ul class="fh5co-social">
					<li><a href="#"><i class="icon-linkedin"></i></a></li>
					<li><a href="#"><i class="icon-facebook"></i></a></li>
					<li><a href="#"><i class="icon-google-plus"></i></a></li>
					<li><a href="#"><i class="icon-instagram"></i></a></li>
				</ul>
			</div>

			<!-- Columna 4: Logo C√°mara de Comercio -->
			<div class="col-md-3 col-sm-12 text-center">
				<p style="margin-bottom: 5px; color: #bbb;">Con el apoyo de:</p>
				<img src="images/logo_ccbarranca_web_mod.png"
					 alt="C√°mara de Comercio de Barrancabermeja"
					 style="max-width: 180px; width: 100%; height: auto;">
			</div>

			<!-- Copyright -->
			<div class="col-md-12 fh5co-copyright text-center" style="margin-top: 30px;">
				<p>&copy; 2025 DataRegi√≥n. Todos los derechos reservados.
					<span>Designed with <i class="icon-heart"></i> by
						<a href="http://competitics.org/" target="_blank">Competitics</a>
					</span>
					<span>Dev by <a href="https://www.kadistu.com.co/" target="_blank">Kadistu Creative Agency</a></span>
				</p>
			</div>

		</div>
	</footer>

</div>

<!-- JS -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.flexslider-min.js"></script>
<script src="js/main.js"></script>

<!-- FILTROS -->
<script>
// === Configuraci√≥n de la API p√∫blica ===
const API_PUBLIC_DOCS = "http://localhost:4000/api/documents/public";

// Funci√≥n para construir una tarjeta de documento
function crearTarjetaDocumento(doc) {
  const div = document.createElement('div');
  div.className = 'fh5co-property documento-item';

  // data-text se usa para b√∫squeda (t√≠tulo + descripci√≥n)
  const textoBusqueda = `${doc.title || ''} ${doc.description || ''}`.toLowerCase();
  div.setAttribute('data-text', textoBusqueda);

  // si en un futuro tienes categor√≠a desde la API:
  // div.setAttribute('data-cat', doc.categoria || '');

  div.innerHTML = `
    <div class="fh5co-property-innter">
      <h3>${doc.title}</h3>
      <p>${doc.description || ''}</p>
    </div>
    <p class="fh5co-property-specification">
      <a href="http://localhost:3000/" class="btn btn-info btn-sm" target="_blank" rel="noopener">
        <i class="icon-download"></i> Descargar
      </a>
    </p>
  `;

  return div;
}

// Cargar documentos desde la API al cargar la p√°gina
document.addEventListener('DOMContentLoaded', function () {
  const lista = document.getElementById('listaDocumentos');

  fetch(API_PUBLIC_DOCS)
    .then(res => res.json())
    .then(docs => {
      // Limpia el contenedor
      lista.innerHTML = '';

      if (!docs.length) {
        lista.innerHTML = '<p>No hay documentos disponibles.</p>';
        return;
      }

      docs.forEach(doc => {
        const card = crearTarjetaDocumento(doc);
        lista.appendChild(card);
      });

      // Despu√©s de pintar los documentos, activamos filtros
      activarBuscador();
      activarFiltroCategorias();
    })
    .catch(err => {
      console.error('Error cargando documentos p√∫blicos', err);
      lista.innerHTML = '<p>Error al cargar los documentos.</p>';
    });
});

// üîç Filtrar documentos por texto
function activarBuscador() {
  const input = document.getElementById('buscarDocumento');

  if (!input) return;

  input.addEventListener('input', function () {
    const q = this.value.toLowerCase();

    document.querySelectorAll('.documento-item').forEach(item => {
      const txt = (item.getAttribute('data-text') || '').toLowerCase();
      item.style.display = txt.includes(q) ? '' : 'none';
    });
  });
}

// üóÇ Filtrar documentos por categor√≠a (si quieres usar data-cat en el futuro)
function activarFiltroCategorias() {
  const categorias = document.querySelectorAll('.categoria-item');

  categorias.forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();
      const categoria = this.getAttribute('data-cat');

      // Si quieres un bot√≥n "todas", puedes manejar categoria === 'all'
      document.querySelectorAll('.documento-item').forEach(item => {
        if (!categoria) {
          item.style.display = '';
        } else {
          const catItem = item.getAttribute('data-cat');
          item.style.display = (catItem === categoria) ? '' : 'none';
        }
      });
    });
  });
}
</script>

</body>
</html>
